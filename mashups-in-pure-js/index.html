<!DOCTYPE html>
<html>
<head>
  <title>Musical mashups in pure JavaScript | Boris Smus</title>

  <meta charset='utf-8' />
  <meta name='viewport' content='width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0' />

  <meta name="description" content="A musical hack about using JSONP to fetch lyrics cross domain from LyricWiki.org." />
  <meta name="author" content="Boris Smus" />
  <link rel="canonical" href="https://smus.com/mashups-in-pure-js/" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Musical mashups in pure JavaScript" />
  <meta name="twitter:description" content="A musical hack about using JSONP to fetch lyrics cross domain from LyricWiki.org." />

  <!-- Facebook -->
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://smus.com/mashups-in-pure-js/" />
  <meta property="og:title" content="Musical mashups in pure JavaScript" />
  <meta property="og:description" content="A musical hack about using JSONP to fetch lyrics cross domain from LyricWiki.org." />

  <!-- Mastodon -->
  <link rel="me" href="https://mastodon.social/@borismus">

  <!-- Coil monetization experiment: https://coil.com/settings/monetize -->
  <meta name="monetization" content="$ilp.uphold.com/4Fnyw8KLaPZG">

  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/static/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/icons/favicon-16x16.png">
  <link rel="manifest" href="/static/icons/site.webmanifest">

  <!-- Styles -->
  <link
  href='//fonts.googleapis.com/css?family=Roboto+Condensed:300|Open+Sans+Condensed:700|Source+Serif+Pro:400,700|Inconsolata' rel='stylesheet' type='text/css'>
  <link rel='stylesheet' href='/static/css/style.css'>
  <link rel='stylesheet' href='/static/css/syntax-highlight.css'>

  <!-- Feed -->
  <link href="https://smus.com/atom.xml" rel="alternate" title="Boris Smus" type="application/atom+xml"/>
</head>
<body>
<header>
  <div id='title'>
    <h1><a href='/'>Boris Smus</a></h1>
    <h2>interaction engineering</h2>
  </div>
  <nav role='navigation'>
    <a href='/about/' >About</a>
    <a href='/blog/' >Blog</a>
    <a href='/projects/' >Projects</a>
  </nav>
</header>

<section id='main'>
  <article>
    <a href='/mashups-in-pure-js'><h1 class='title'>Musical mashups in pure JavaScript</h1></a>
    <div class='body'>
      <p>When I want to learn a new song on guitar, I often search for chords
online. There are many sites that provide chords and tabs, and Google
indexes them nicely. But the quality of chords is often poor, and
there's no way to submit corrections. When I ran a MoinMoin wiki, I kept
my fixed versions of songs there. Even making modifications to existing
chords was painful though, since it involved hand-editing a plain text
file and ensuring that the chords were properly aligned with the lyrics.
My preferred solution to this problem is to write a web application to
facilitate easy collaborative editing of simple folk/rock/pop songs. </p>

<p>I started working on a proof-of-concept prototype. To begin with, I wanted
an easy way of finding song lyrics, which provide the skeleton for most
guitar pieces that I'm interested in. Later, I planned to work on
annotating those lyrics. As I prepared to whip up a light django
application to scrape lyrics sites, I realized that there may be a
simpler way: if I found a friendly lyrics API, there would be no need to
write any server side code. Could the entire service be written in
Javascript? </p>

<p>LyricWiki.org had exactly what I need: a simple way to
access <a href="http:///mashups-in-pure-js/lyricwiki.org/api.php?artist=Slipknot&amp;song=Before_I_Forget&amp;fmt=json">lyrics in JSON</a> format. Of course, you can't just do an
XmlHttpRequest to lyricswiki.org because of XSS security restrictions.
Instead, you <em>can</em> work around this cross-domain scripting issue by
writing out <script\&gt; tags, and specifying the script src dynamically.
Luckily, the LyricWiki JSON is wrapped (padded) in a variable named
'song'. As I later discovered, this practice of wrapping JSON in a
variable is well established, and called <a href="http://en.wikipedia.org/wiki/JSONP">JSONP</a>. This technique makes
it easy to simply evaluate the script tag, and wait for the song
variable to change. Now If only there was a safe way of doing this sort
of cross-domain scripting without introducing a <a href="http://personalized20.blogspot.com/2006/02/jsonp-service-and-security.html">host</a> of <a href="http://unclehulka.com/ryan/blog/archives/2005/12/12/jsonpyoure-joking-right/">XSS</a>
<a href="http://www.west-wind.com/Weblog/posts/107136.aspx">vulnerabilities</a>, writing mashups would be a walk in the park! </p>

<p>After only two hours of hacking around, including learning jQuery, I came up
with a <a href="/mashups-in-pure-js/lyricwiki">little demo application</a>, written in pure Javascript. Hooray for
jQuery, humanmsg, and the LyricsWiki API!</p>

    </div>
    <div class='subfooter'>
      <div class='tombstone'>▪</div>
      <time class='published'>December 4, 2008</time>
    </div>
  </article>
</section>


<footer>
  <div>
    © Copyright 2005–2024 Boris Smus.
  </div>
  <nav role="footer">
    <a href='https://smus.com/atom.xml'>RSS</a>
    <a style="display: none" rel="me" href="https://mastodon.social/@borismus">Mastodon</a>
  </nav>
</footer>

<!-- Misc scripts: syntax highlighting, analytics, stats. -->
<script src="/static/js/highlight.pack.js"></script>
<!-- Syntax highlighting for code. -->
<script>
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
</script>
<!-- Lightning builder error check. -->
<script src="/lightning_error.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-38Y45XD5VQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-38Y45XD5VQ');
</script>


</body>
</html>