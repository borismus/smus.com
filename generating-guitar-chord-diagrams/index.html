<!DOCTYPE html>
<html>
<head>
  <title>Generating guitar chord diagrams | Boris Smus</title>

  <meta charset='utf-8' />
  <meta name='viewport' content='width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0' />

  <meta name="description" content="A python script that generates all possible ways of playing the specified guitar chord. I used this for Guitar Unleashed." />
  <meta name="author" content="Boris Smus" />
  <link rel="canonical" href="https://smus.com/generating-guitar-chord-diagrams/" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Generating guitar chord diagrams" />
  <meta name="twitter:description" content="A python script that generates all possible ways of playing the specified guitar chord. I used this for Guitar Unleashed." />

  <!-- Facebook -->
  <meta property="og:type" content="article" />
  <meta property="og:url" content="https://smus.com/generating-guitar-chord-diagrams/" />
  <meta property="og:title" content="Generating guitar chord diagrams" />
  <meta property="og:description" content="A python script that generates all possible ways of playing the specified guitar chord. I used this for Guitar Unleashed." />

  <!-- Coil monetization experiment: https://coil.com/settings/monetize -->
  <meta name="monetization" content="$ilp.uphold.com/4Fnyw8KLaPZG">

  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/static/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/icons/favicon-16x16.png">
  <link rel="manifest" href="/static/icons/site.webmanifest">

  <!-- Styles -->
  <link
  href='//fonts.googleapis.com/css?family=Roboto+Condensed:300|Open+Sans+Condensed:700|Source+Serif+Pro:400,700|Inconsolata' rel='stylesheet' type='text/css'>
  <link rel='stylesheet' href='/static/css/style.css'>
  <link rel='stylesheet' href='/static/css/syntax-highlight.css'>

  <!-- Feed -->
  <link href="https://smus.com/atom.xml" rel="alternate" title="Boris Smus" type="application/atom+xml"/>
</head>
<body>
<header>
  <div id='title'>
    <h1><a href='/'>Boris Smus</a></h1>
    <h2>interaction engineering</h2>
  </div>
  <nav role='navigation'>
    <a href='/about/' >About</a>
    <a href='/blog/' >Blog</a>
    <a href='/clippings/' >Clippings</a>
  </nav>
</header>

<section id='main'>
  <article>
    <a href='/generating-guitar-chord-diagrams'><h1 class='title'>Generating guitar chord diagrams</h1></a>
    <div class='body'>
      <p>One day I wanted to add a feature to <a href="http://www.guitarunleashed.com">Guitar Unleashed</a> which exists
in some of the better guitar tab sites. When a user hovers over a chord,
they are shown a diagram representing the guitar fret with overlaid
finger positions required to produce this chord. Many of the most
popular sites do this by showing a crude, plain-text representation of
the chord.</p>

<p>For example, a C chord is shown as follows:</p>

<pre><code>e ---|---|---|---|---|
B -x-|---|---|---|---|
G ---|---|---|---|---|
D ---|-x-|---|---|---|
A ---|---|-x-|---|---|
E ---|---|-o-|---|---|
</code></pre>

<p>Typeset guitar chord representation looks very different. Two most
popular variants of the C chord would appear above the staff with small
symbols that look something like this: </p>

<p><img src="/generating-guitar-chord-diagrams/C.png" alt="C" title="C" />
<img src="/generating-guitar-chord-diagrams/C_1.png" alt="C_1" title="C_1" /> </p>

<p>Such images have many benefits as compared to the plain text version:</p>

<ul>
<li>Convention: many guitar players are used to learning from sheet
music, so this chord notation is familiar to them.</li>
<li>Readability: the image representation is more compact and more
pleasant to read.</li>
<li>Completeness: the image version has an easy way to display barre
chords and specify fingerings (not pictured)</li>
</ul>

<p>True to Guitar Unleashed's mission of being a truly usable guitar chords
site, I decided to display typeset fret diagrams. For the
implementation, a program would pre-generate images on the server based
on the encoded chord shape and then serve these images dynamically via
JavaScript. Unfortunately, I found no software to generate such images
for all popular chords, so I ended up developing my own. </p>

<p>From some brief
research, I decided that <a href="http://lilypond.org/doc/v2.9/Documentation/user/lilypond/Fret-diagrams">lilypond fret diagrams</a> are the most elegant
way of creating such images. The alternative was to use <a href="http://www.aei.mpg.de/~peekas/gchords/">GCHORDS</a>
whose output I liked less, and which required depending on TeX.
Typically lilypond typesets an entire piece of sheet music on a staff,
with clefs, key signatures, etc. After discovering a really great
<a href="http://netcetera.org/cgi-bin/tmbundles.cgi#Lilypond">lilypond bundle for textmate</a>, I managed to get rid of these
unnecessary features and display just a fret diagram. The following
python-parametrized lilypond template does the trick:</p>

<pre><code>\include "lilypond-book-preamble.ly"
\version "2.10.0"
\markup
\fret-diagram-terse #"%(chord_markup)s"
</code></pre>

<p>Then, using lilypond's fret diagram encoding, a python script replaces
<code>%(chord_markup)s</code> with the desired markup. Lilypond's markup is very
terse but mostly manageable. Sample markup for a C chord looks like
this: <code>x;3;2;o;1;o;</code>, while the barre version looks a little bit more
bizarre, like this: <code>3-(;3;5;5;5;3-);</code>. </p>

<p>My python program contains a list of chord shapes for the most popular chords,
encoded in the manner above, then outputs images for each chord and variant
into a directory.  I've made it <a href="/generating-guitar-chord-diagrams/chord-image-generator.zip">available for download</a>, in case your next
project needs generated fret diagrams with a highly customizable look. You can
also see the diagrams live at <a href="http://www.guitarunleashed.com">guitarunleashed.com</a>.</p>

    </div>
    <div class='subfooter'>
      <div class='tombstone'>▪</div>
      <time class='published'>June 14, 2009</time>
    </div>
  </article>
</section>


<footer>
  <div>
    © Copyright 2005–2022 Boris Smus.
  </div>
  <nav role="footer">
    <a href='https://smus.com/atom.xml'>RSS</a>

    <!-- Mastodon verification -->
    <a rel="me" href="https://mastodon.social/@borismus" style="display: none">Mastodon</a>
  </nav>
</footer>

<!-- Misc scripts: syntax highlighting, analytics, stats. -->
<script src="/static/js/highlight.pack.js"></script>
<script>
  // Syntax highlighting for code.
  hljs.tabReplace = '  ';
  hljs.initHighlightingOnLoad();
</script>
<script>
  // Google Analytics.
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-17930798-22', 'smus.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>
<script src="/lightning_error.js"></script>

</body>
</html>